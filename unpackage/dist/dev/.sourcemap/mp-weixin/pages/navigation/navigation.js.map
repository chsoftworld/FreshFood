{"version":3,"sources":["webpack:///D:/JCY/Project/FrFo/FreshFood/main.js","webpack:///D:/JCY/Project/FrFo/FreshFood/pages/navigation/navigation.vue?1ee4","webpack:///D:/JCY/Project/FrFo/FreshFood/pages/navigation/navigation.vue?226a","webpack:///D:/JCY/Project/FrFo/FreshFood/pages/navigation/navigation.vue?9026","webpack:///D:/JCY/Project/FrFo/FreshFood/pages/navigation/navigation.vue?0034","webpack:///D:/JCY/Project/FrFo/FreshFood/pages/navigation/navigation.vue"],"names":["createPage","Page","data","loading","PageCur","OpenId","showModal","identity","loginModel","nickName","avatarUrl","onShow","shareApp","methods","wx","showShareMenu","withShareTicket","NavChange","e","currentTarget","dataset","cur","login","_this","uni","provider","success","loginRes","code","request","url","method","res","state","console","log","openid","getClientInfor","getBrokerInfor","fail","userRegister","getUserInfo","infoRes","userInfo","username","head_img","header","setStorage","key","complete","onLoad"],"mappings":"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","file":"pages/navigation/navigation.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/navigation/navigation.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./navigation.vue?vue&type=template&id=91e55b8c&\"\nvar renderjs\nimport script from \"./navigation.vue?vue&type=script&lang=js&\"\nexport * from \"./navigation.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Software/HBuilderX alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\Software\\\\HBuilderX alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('91e55b8c')) {\n      api.createRecord('91e55b8c', component.options)\n    } else {\n      api.reload('91e55b8c', component.options)\n    }\n    module.hot.accept(\"./navigation.vue?vue&type=template&id=91e55b8c&\", function () {\n      api.rerender('91e55b8c', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"JCY/Project/FrFo/FreshFood/pages/navigation/navigation.vue\"\nexport default component.exports","export * from \"-!../../../../../../Software/HBuilderX alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Software/HBuilderX alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Software/HBuilderX alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Software/HBuilderX alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Software/HBuilderX alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Software/HBuilderX alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./navigation.vue?vue&type=template&id=91e55b8c&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Software/HBuilderX alpha/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Software/HBuilderX alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Software/HBuilderX alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Software/HBuilderX alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Software/HBuilderX alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./navigation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Software/HBuilderX alpha/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Software/HBuilderX alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Software/HBuilderX alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Software/HBuilderX alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Software/HBuilderX alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./navigation.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tloading:false,\n\t\t\t\n\t\t\tPageCur: 'index',\n\t\t\tOpenId:'',\n\t\t\tshowModal:\"123456\",\n\t\t\t// 默认身份是游客[{\"key\":\"0\"},{\"data\":\"[\"openid\"]\"}]）\n\t\t\tidentity:[],\n\t\t\tloginModel:false,\n\t\t\t\n\t\t\t// 用户注册有关\n\t\t\tnickName:\"\",\n\t\t\tavatarUrl:\"\",\n\t\t\t\n\t\t\t\n\t\t}\n\t},\n\tonShow() {\n\t\tthis.shareApp();\n\t\t// console.log(\"123\");\n\t},\n\tmethods: {\n\t\tshareApp(){\n\t\t\twx.showShareMenu({\n\t\t\t  withShareTicket: true\n\t\t\t})\n\t\t},\n\t\t\n\t\tNavChange: function(e) {\n\t\t\tthis.PageCur = e.currentTarget.dataset.cur\n\t\t\t// console.log(this.PageCur)\n\t\t},\n\t\t\n\t\t// 获取用户code，判断用户是否注册过\n\t\tlogin() {\n\t\t\tlet _this = this;\n\t\t\t \n\t\t\t//1.wx获取登录用户code\n\t\t\tuni.login({\n\t\t\t\tprovider: 'weixin',\n\t\t\t\tsuccess: function(loginRes) {\n\t\t\t\t\tlet code = loginRes.code;\n\t\t\n\t\t\t\t\t//2.将用户登录code传递到后台置换用户SessionKey、OpenId等信息\n\t\t\t\t\tuni.request({\n\t\t\t\t\t\turl: 'https://www.ckcoffee.club/login/',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tcode: code,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tmethod: 'GET', \n\t\t\t\t\t\tsuccess: (res) => { \n\t\t\t\t\t\t\t// console.log(res.data);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif ( res.data.state== 1001) {\n\t\t\t\t\t\t\t\tconsole.log(\"未注册的用户！\")\n\t\t\t\t\t\t\t\t// 未注册的用户，强制用户注册\n\t\t\t\t\t\t\t\t_this.loginModel = true;\n\t\t\t\t\t\t\t\t_this.OpenId = res.data.openid;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif( res.data.state== 1002 ){\n\t\t\t\t\t\t\t\tconsole.log(\"游客用户\")\n\t\t\t\t\t\t\t\t_this.OpenId = res.data.openid\n\t\t\t\t\t\t\t\t_this.getClientInfor()\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif( res.data.state== 1003 ){\n\t\t\t\t\t\t\t\tconsole.log(\"经纪人用户\")\n\t\t\t\t\t\t\t\t_this.OpenId = res.data.openid\n\t\t\t\t\t\t\t\t_this.getBrokerInfor()\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t_this.loading = false;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 身份验证成功之后再开始渲染index页面。之后给index页面传递参数\n\t\t\t\t\t\t\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail(res) {\n\t\t\t\t\t\t\t// 第一次发送失败，再来一次！\n\t\t\t\t\t\t\t_this.login();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\t// 用户注册\n\t\tuserRegister(){\n\t\t\tlet _this = this;\n\t\t\tuni.getUserInfo({\n\t\t\t    provider: 'weixin',\n\t\t\t    success: function(infoRes) {\n\t\t\t        _this.nickName = infoRes.userInfo.nickName; //昵称\n\t\t\t        _this.avatarUrl = infoRes.userInfo.avatarUrl; //头像\n\t\t\t\t\t\n\t\t\t\t\t// 用户首次注册\n\t\t\t\t\tuni.request({\n\t\t\t\t\t    url:'https://www.ckcoffee.club/client/',\n\t\t\t\t\t    data: {\n\t\t\t\t\t        openid: _this.OpenId,\n\t\t\t\t\t        username: _this.nickName,\n\t\t\t\t\t        head_img: _this.avatarUrl\n\t\t\t\t\t    },\n\t\t\t\t\t    method: 'POST',\n\t\t\t\t\t    header: {\n\t\t\t\t\t        'content-type': 'application/json'\n\t\t\t\t\t    },\n\t\t\t\t\t    success: (res) => {\n\t\t\t\t\t\t\t// console.log(res.data)\n\t\t\t\t\t\t\t_this.OpenId = res.data.openid\n\t\t\t\t\t\t\t_this.getClientInfor()\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t_this.loginModel = false\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t    },\n\t\t\t\t\t\tfail() {\n\t\t\t\t\t\t\tconsole.log(\"出错了！\")\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t_this.loading = false;\n\t\t\t\t\t\n\t\t\t    },\n\t\t\t    fail(res) {\n\t\t\t\t\tconsole.log(res)\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tgetClientInfor(){\n\t\t\tlet _this = this\n\t\t\tuni.request({\n\t\t\t\turl: 'https://www.ckcoffee.club/client/',\n\t\t\t\tmethod: 'GET',\n\t\t\t\tdata: {\n\t\t\t\t\tstate:\"getOneClientInfor\",\n\t\t\t\t\topenid: _this.OpenId\n\t\t\t\t},\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tconsole.log(res.data[0])\n\t\t\t\t\t_this.identity = ['0',{'userInfor':res.data[0]}];\n\t\t\t\t\tuni.setStorage({\n\t\t\t\t\t\tkey: 'userinfor',\n\t\t\t\t\t\tdata: _this.identity,\n\t\t\t\t\t\tsuccess: function () {\n\t\t\t\t\t\t\tconsole.log(\"设置缓存成功\");\n\t\t\t\t\t\t\t// 身份验证成功，展示主页\n\t\t\t\t\t\t\t_this.PageCur = \"index\";\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t},\n\t\t\t\tfail: () => {},\n\t\t\t\tcomplete: () => {}\n\t\t\t});\n\t\t},\n\t\tgetBrokerInfor(){\n\t\t\tlet _this = this\n\t\t\tuni.request({\n\t\t\t\turl: 'https://www.ckcoffee.club/broker/',\n\t\t\t\tmethod: 'GET',\n\t\t\t\tdata: {\n\t\t\t\t\tstate:\"getOneBrokerInfor\",\n\t\t\t\t\topenid: _this.OpenId\n\t\t\t\t},\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tconsole.log(res.data[0]);\n\t\t\t\t\t_this.identity = ['1',{'userInfor':res.data[0]}];\n\t\t\t\t\t// 将身份详细存入缓存\n\t\t\t\t\tuni.setStorage({\n\t\t\t\t\t\tkey: 'userinfor',\n\t\t\t\t\t\tdata: _this.identity,\n\t\t\t\t\t\tsuccess: function () {\n\t\t\t\t\t\t\tconsole.log(\"设置缓存成功\");\n\t\t\t\t\t\t\t// 身份验证成功，展示主页\n\t\t\t\t\t\t\t_this.PageCur = \"index\";\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t},\n\t\t\t\tfail: () => {},\n\t\t\t\tcomplete: () => {}\n\t\t\t});\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t},\n\tonLoad() {\n\t\t// wx.checkSession({\n\t\t// \tsuccess: function(){\n\t\t// \t\t//session_key 未过期，并且在本生命周期一直有效\n\t\t// \t\tconsole.log(\"未过期\")\n\t\t// \t},\n\t\t// \tfail: function(){\n\t\t// \t\t// session_key 已经失效，需要重新执行登录流程\n\t\t// \t\tconsole.log(\"已经过期\") \n\t\t// \t\t// wx.login() //重新登录\n\t\t// \t}\n\t\t// });\n\t\t// // 登陆\n\t\t// let _this = this\n\t\t// \n\t\t// // setTimeout(function() {\n\t\t// // \t_this.login();\n\t\t// // }, 3000);\n\t\t// \n\t\t// _this.login();\n\n\t}\n}\n"],"sourceRoot":""}